<ng-template #assignCirclceMembersModal let-modal>
  <div class="modal-header modal-head">
    <div>
      <h5 class="modal-title">Assign Members</h5>
      <p class="subtitle mb-0">Group: <strong>{{ group()?.name }}</strong></p>
    </div>
    <button type="button" class="btn-close" aria-label="Close" (click)="closeModal(modal)"></button>
  </div>

  <div class="modal-body">
    <div class="info-row">
      <span class="badge rounded-pill text-bg-primary">
        {{ userAndGroupIds().length }} selected
      </span>
      <small class="text-muted">Search and add unassigned users below.</small>
    </div>

    @if (errorMessage()) {
      <div class="alert alert-danger py-2 px-3 mt-2 mb-3">{{ errorMessage() }}</div>
    }

    <form [formGroup]="circleForm">
      <app-circle-member-search-field [groupId]="groupId()" (emitIdDataSet)="setDataset($event)" />
    </form>
  </div>

  <div class="modal-footer modal-foot">
    <button class="btn btn-outline-secondary" (click)="closeModal(modal)" [disabled]="isSaving()">Cancel</button>
    <button class="btn btn-primary d-inline-flex align-items-center" (click)="saveGroup(modal)"
      [disabled]="!userAndGroupIds().length || isSaving()">
      @if (isSaving()) {
        <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      }
      Save Members
    </button>
  </div>
</ng-template>
