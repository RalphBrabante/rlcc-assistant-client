<form [formGroup]="form">
  <div class="mb-3">
    <label class="form-label">Member Search</label>
    <div class="position-relative">
      <small class="mb-2" style="color:red">{{errorMessage()}}</small>
      <input type="text" name="searchKeyword" class="form-control pe-5" formControlName="searchKeyword"
        placeholder="Serach First Name or Last Name" />

      <!-- Spinner overlay -->
      <div *ngIf="loading()" class="position-absolute top-50 end-0 translate-middle-y me-2">
        <div class="spinner-border spinner-border-sm text-secondary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
    <div class="result">
      @for (user of unassignedUsers(); track $index) {
      <div class="data-row d-flex justify-content-between">{{user.firstName +
        " " +user.lastName + " " +user.id}} <i class="bi bi-plus-circle-fill" style="color:green"
          (click)="addMemberToArray(user)"></i></div>
      }

    </div>
  </div>
</form>

@if(membersToBeAdded.value.length){
<div class="mb-3">
  <!-- Responsive wrapper -->
  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead class="table-dark">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Name</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        @for (member of membersToBeAdded.value; track $index) {
        <tr>
          <td>{{ member.userId }}</td>
          <td>{{ member.fullName }}</td>
          <td class="text-end"><button class="btn btn-outline-danger btn-sm" ngbTooltip="Remove" (click)="removeToBeAddedMember(member.userId)"><i class="bi bi-x-square-fill"></i></button></td>
        </tr>
        } @empty {
        <tr>
          <td colspan="2" class="text-center text-muted">
            No data found
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
</div>
}